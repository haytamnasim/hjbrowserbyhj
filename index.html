const proxy = 'https://api.allorigins.win/raw?url=';
const frame = document.getElementById('frame');
const urlBar = document.getElementById('url');

function load(u) {
  if (!u) return;
  if (!/^https?:\/\//i.test(u)) u = 'https://' + u;
  if (u.includes(' ')) u = 'https://www.google.com/search?q=' + encodeURIComponent(u) + '&pws=0';
  frame.src = proxy + encodeURIComponent(u);
  urlBar.value = u;
}

document.getElementById('go').onclick = () => load(urlBar.value);
urlBar.onkeydown = e => { if (e.key === 'Enter') load(urlBar.value); };
document.getElementById('back').onclick = () => frame.contentWindow.history.back();
document.getElementById('fwd').onclick = () => frame.contentWindow.history.forward();
document.getElementById('reload').onclick = () => frame.src = frame.src;
document.querySelectorAll('.tile').forEach(t => t.onclick = () => load(t.dataset.url));
load('https://www.google.com/?pws=0');
